
# Docker 

- Docker is a containerization platform that is used to make software applications light and cross-compatible accross different environments 
- Docker is similar to VM in a sense that it creates a platform for the execution of the applciation different from the host environment but differs in the fact that VM's have a host OS while docker doesn't 
- Main components
	- Docker Engine 
		- the main program
		- Docker Daemon: background service that does the actual work 
		- REST API: communication between other programs 
		- Docker cli : command line tool 
	- Docker client 
		- the interface
	- Docker registry 
		- Storage of docker images
- when you run a image, the daemon checks if it's locally presents or else it downloads and creates the container 
- Docker image - recipe 
- Docker container - running instance of the image 

![[Pasted image 20250719141400.png]]

# Docker Commands

- `docker images` or `docker image ls` to list all the images
- `docker pull ubuntu` : downloads the image from docker hub 
- `docker search ubuntu` : searches for the image ubuntu in docker hub
- `docker rmi image_name` or `docker image rm image_name` : delete the image (make sure to stop and delete any running container originated from this image)
- `docker build -t my_app .` : creates a new image from a Dockerfile
- `docker history image_name` : shows how an image was build (what commands were used)

## Running Containers 

```bash
# Basic run
docker run hello-world

# Run with a name
docker run --name my-container nginx

# Run in background (detached mode)
docker run -d nginx

# Run with port mapping
docker run -p 8080:80 nginx

# Run interactively
docker run -it ubuntu /bin/bash

# you can also run interactive containers in detached mode to check if they are running or not
docker run -itd ubuntu bash
```

## Listing Containers

```bash
# Show running containers
docker ps

# Show all containers (running and stopped)
docker ps -a

# Show only container IDs
docker ps -q
```

## Managing Container State

```bash
# Stop a running container
docker stop container_name

# Start a stopped container
docker start container_name

# Restart a container
docker restart container_name

# Pause a container
docker pause container_name

# Unpause a container
docker unpause container_name
```

## Entering Containers 

```bash
# Execute a command in a running container
docker exec -it container_name /bin/bash

# Attach to a running container
docker attach container_name
```

## Container Information 

```bash
# Show container details
docker inspect container_name

# Show container logs
docker logs container_name

# Show running processes in container
docker top container_name

# Show resource usage
docker stats container_name
```

## Removing Containers 

```bash
# Remove a stopped container
docker rm container_name

# Remove a running container (force)
docker rm -f container_name

# Remove all stopped containers
docker container prune
```

## Copying files

```bash
# Copy from container to host
docker cp container_name:/path/file.txt ./file.txt

# Copy from host to container
docker cp ./file.txt container_name:/path/file.txt

```

## Volume Commands

```bash
# Create a volume
docker volume create my-volume

# List volumes
docker volume ls

# Remove a volume
docker volume rm my-volume

# Run container with volume
docker run -v my-volume:/data nginx
```

- A Docker Volume is the preferred mechanism for persisting data generated by and used by Docker containers. Containers, by design, are ephemeral, meaning any changes made inside their writable layer are lost when the container is removed. Volumes solve this problem by providing a way to store data outside the container's lifecycle

## Cleanup Commands 

```bash
# Remove all stopped containers
docker container prune

# Remove all unused images
docker image prune

# Remove all unused volumes
docker volume prune

# Remove all unused networks
docker network prune

# Remove everything unused
docker system prune -a
```

## Saving work

```bash
# Run a container and make changes
docker run -it ubuntu /bin/bash

# Inside container: install something
apt-get update
apt-get install vim

# In another terminal, save the changes
docker commit container_id my-ubuntu-with-vim

# Now you have a new image with vim installed
```

